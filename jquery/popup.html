<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>
        $(function() {

            $('.open').click(function() {
                bl();
                var tg = '.' + $(this).attr('id'); //.open을 눌렀을때 아이디 값을 이용하여 팝업이랑  연결시켜주기 위함이다.
                var w = $(tg).width(); //가운데 정렬 하기 위해 뽑는것이다.
                var h = $(tg).height(); //가운데 정렬 하기 위해 뽑는것이다.
                var w1 = $(window).height();
                console.log(h / 2);
                $(tg).show().css({
                    left: '50%',
                    top: function() {
                        return $(window).scrollTop() + 'px' //윈도우가 가리키는 스크롤 위치 값을 반환
                    },
                    marginLeft: function() {
                        return '-' + (w / 2) + "px" //레프트로 50%옮겨진 후 가로 값의 반절 을 이동하게 되면 가운데 정렬이 됨.
                    },
                    marginTop: function() {
                        return (w1 / 2) - (h / 2) + "px"
                    }

                });
            })

            var close = function() {

                $('.pop').hide();
                $('.bl').fadeOut(function() {
                    $(this).remove();
                })

            }

            $('body').on('click', '.bl', close); //body 안에 bldms 사실상 존재 하지 않고 css상에만 존재 하므로 body를 통해 on매소드를 써서 이벤트를 적용시킨다.
            // body 안에 bl을 클릭하면 클로즈 함수를 실행해.
            $('.close').click(close); //위와 아래는 close 함수를 따로 빼놓은것은 중복되기 때문이다.

            function bl() {
                $('body').prepend('<div class="bl"></div>');
            }


        })
    </script>

    <style>
        * {
            margin: 0;
            padding: 0;
        }

        body {
            background: #CCC;
        }

        .wrap {
            width: 800px;
            height: 1500px;
            border: 1px #333 solid;
            margin: 50px auto;
            background-color: #fff;
        }

        button.open {
            margin-top: 500px;
        }

        .pop {
            border: 1px #F00 solid;
            position: absolute;
            display: none;
            background-color: #fff;
        }

        .popup1 {
            width: 200px;
            height: 300px;
        }

        .popup2 {
            width: 300px;
            height: 200px;
        }

        .popup3 {
            width: 500px;
            height: 500px;
        }

        .bl {
            position: fixed;
            width: 100%;
            height: 100%;
            left: 0;
            top: 0;
            background-color: rgba(0, 0, 0, .8);
        }
    </style>

</head>

<body>

    <div class="wrap">

        <button class="open" id="popup1">팝업나와1</button>
        <button class="open" id="popup2">팝업나와2</button>
        <button class="open" id="popup3">팝업나와3</button>


    </div>


    <div class="pop popup1">
        <button class="close">닫기</button>
        <h1>팝업1</h1>
    </div>
    <div class="pop popup2">
        <button class="close">닫기</button>
        <h1>팝업2</h1>
    </div>
    <div class="pop popup3">
        <button class="close">닫기</button>
        <h1>팝업3</h1>
    </div>

</body>

</html>
